Parte II

2 – Endereçamento e Encaminhamento IP

1. Para o router e um laptop do departamento A:

a) Execute o comando netstat -rn por forma a poder consultar a tabela de encaminhamento unicast (IPv4). Inclua no seu relatório as tabelas de encaminhamento obtidas; interprete as várias entradas de cada tabela. Se necessário, consulte o manual respetivo (man netstat).

Cada uma das entradas da tabela faz referência a um datagrama que é destinado a Destination, sendo entregue a Gateway e saindo pela interface Iface. Mais concretamente:

Usando netstat -rn no ROUTER N2:
A primeira linha diz-nos que foi enviado um datagrama que tem como destino 10.0.0.0, sendo entregue a 0.0.0.0 (default) e saindo pela interface eth0.
A segunda linha diz-nos que foi enviado um datagrama que tem como destino 10.0.1.0, sendo entregue a 10.0.0.1 e saindo pela interface eth0.
A terceira linha diz-nos que foi enviado um datagrama que tem como destino 10.0.2.0, sendo entregue a 0.0.0.0 e saindo pela interface eth1.
A quarta linha diz-nos que foi enviado um datagrama que tem como destino 10.0.3.0, sendo entregue a 0.0.0.0 e saindo pela interface eth2.
A quinta linha diz-nos que foi enviado um datagrama que tem como destino 10.0.4.0, sendo entregue a 0.0.0.0 e saindo pela interface eth3.
A sexta linha diz-nos que foi enviado um datagrama que tem como destino 10.0.5.0, sendo entregue a 10.0.0.1 e saindo pela interface eth0.
A sétima linha diz-nos que foi enviado um datagrama que tem como destino 10.0.6.0, sendo entregue a 10.0.2.2 e saindo pela interface eth1.
0.0.0.0 – são o próprio router

Usando netstat -rn no LAPTOP n7:
A primeira linha diz-nos que foi enviado um datagrama que tem como destino 0.0.0.0, sendo entregue a 10.0.4.1 e saindo pela interface eth0.
A segunda linha diz-nos que foi enviado um datagrama que tem como destino 10.0.4.0, sendo entregue a 0.0.0.0 e saindo pela interface eth0.

U – está ligado fisicamente  
G – gateway

b) Diga, justificando, se está a ser usado encaminhamento estático ou dinâmico (sugestão: analise que processos estão a correr em cada sistema).

Está a ser usado encaminhamento estático, visto que na alinea anterior ao verificar ao usar netstat -rn no router, nas flags não aparece nenhum D que corresponde a encaminhamento dinâmico.

c) Admita que, por questões administrativas, a rota por defeito (0.0.0.0 ou default) deve ser retirada definitivamente da tabela de encaminhamento do servidor localizado no departamento A. Use o comando route delete para o efeito. Que implicações tem esta medida para os utilizadores da empresa que acedem ao servidor. Justifique.

Ao utilizar o comando route delete default no servidor n4, a route por default (0.0.0.0) foi eliminada como podemos ver no netstat -rn posteriormente executado. As implicações que esta medida irá ter para os utilizadores é a inacessibilidade de se conectarem ao servidor, sendo esta conexão apenas possivel no router n2. Podemos ver esta justificação nos prints dos pings executados.





 
d) Adicione as rotas estáticas necessárias para restaurar a conectividade para o servidor, por forma a contornar a restrição imposta em c). Utilize para o efeito o comando route add e registe os comandos que usou.



e) Teste a nova política de encaminhamento garantindo que o servidor está novamente acessível, utilizando para o efeito o comando ping. Registe a nova tabela de encaminhamento do servidor.

